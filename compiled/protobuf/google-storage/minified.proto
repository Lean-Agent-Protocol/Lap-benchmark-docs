syntax = "proto3";
package google.storage.v2;
import "google/api/client.proto";
import "google/api/field_behavior.proto";
import "google/api/resource.proto";
import "google/api/routing.proto";
import "google/iam/v1/iam_policy.proto";
import "google/iam/v1/policy.proto";
import "google/protobuf/duration.proto";
import "google/protobuf/empty.proto";
import "google/protobuf/field_mask.proto";
import "google/protobuf/timestamp.proto";
import "google/rpc/status.proto";
import "google/type/date.proto";
option go_package = "cloud.google.com/go/storage/internal/apiv2/storagepb;storagepb";
option java_multiple_files = true;
option java_outer_classname = "StorageProto";
option java_package = "com.google.storage.v2";
option (google.api.resource_definition) = {
type: "cloudkms.googleapis.com/CryptoKey"
pattern: "projects/{project}/locations/{location}/keyRings/{key_ring}/cryptoKeys/{crypto_key}"
};
service Storage {
option (google.api.default_host) = "storage.googleapis.com";
option (google.api.oauth_scopes) =
"https://www.googleapis.com/auth/cloud-platform,"
"https://www.googleapis.com/auth/cloud-platform.read-only,"
"https://www.googleapis.com/auth/devstorage.full_control,"
"https://www.googleapis.com/auth/devstorage.read_only,"
"https://www.googleapis.com/auth/devstorage.read_write";
rpc DeleteBucket(DeleteBucketRequest) returns (google.protobuf.Empty) {
option (google.api.routing) = {
routing_parameters { field: "name" path_template: "{bucket=**}" }
};
option (google.api.method_signature) = "name";
}
rpc GetBucket(GetBucketRequest) returns (Bucket) {
option (google.api.routing) = {
routing_parameters { field: "name" path_template: "{bucket=**}" }
};
option (google.api.method_signature) = "name";
}
rpc CreateBucket(CreateBucketRequest) returns (Bucket) {
option (google.api.routing) = {
routing_parameters { field: "parent" path_template: "{project=**}" }
routing_parameters {
field: "bucket.project"
path_template: "{project=**}"
}
};
option (google.api.method_signature) = "parent,bucket,bucket_id";
}
rpc ListBuckets(ListBucketsRequest) returns (ListBucketsResponse) {
option (google.api.routing) = {
routing_parameters { field: "parent" path_template: "{project=**}" }
};
option (google.api.method_signature) = "parent";
}
rpc LockBucketRetentionPolicy(LockBucketRetentionPolicyRequest)
returns (Bucket) {
option (google.api.routing) = {
routing_parameters { field: "bucket" path_template: "{bucket=**}" }
};
option (google.api.method_signature) = "bucket";
}
rpc GetIamPolicy(google.iam.v1.GetIamPolicyRequest)
returns (google.iam.v1.Policy) {
option (google.api.routing) = {
routing_parameters { field: "resource" path_template: "{bucket=**}" }
routing_parameters {
field: "resource"
path_template: "{bucket=projectsbucketsbucketsbucketsbucketsbuckets/*}/**"
}
};
option (google.api.method_signature) = "upload_id";
}
rpc MoveObject(MoveObjectRequest) returns (Object) {
option (google.api.routing) = {
routing_parameters { field: "bucket" path_template: "{bucket=**}" }
};
option (google.api.method_signature) =
"bucket,source_object,destination_object";
}
}
message DeleteBucketRequest {
string name = 1 [
(google.api.field_behavior) = REQUIRED,
(google.api.resource_reference) = { type: "storage.googleapis.com/Bucket" }
];
optional int64 if_metageneration_match = 2;
optional int64 if_metageneration_not_match = 3;
}
message GetBucketRequest {
string name = 1 [
(google.api.field_behavior) = REQUIRED,
(google.api.resource_reference) = { type: "storage.googleapis.com/Bucket" }
];
optional int64 if_metageneration_match = 2;
optional int64 if_metageneration_not_match = 3;
optional google.protobuf.FieldMask read_mask = 5;
}
message CreateBucketRequest {
string parent = 1 [
(google.api.field_behavior) = REQUIRED,
(google.api.resource_reference) = {
child_type: "storage.googleapis.com/Bucket"
}
];
Bucket bucket = 2 [(google.api.field_behavior) = OPTIONAL];
string bucket_id = 3 [(google.api.field_behavior) = REQUIRED];
string predefined_acl = 6 [(google.api.field_behavior) = OPTIONAL];
string predefined_default_object_acl = 7
[(google.api.field_behavior) = OPTIONAL];
bool enable_object_retention = 9 [(google.api.field_behavior) = OPTIONAL];
}
message ListBucketsRequest {
string parent = 1 [
(google.api.field_behavior) = REQUIRED,
(google.api.resource_reference) = {
child_type: "storage.googleapis.com/Bucket"
}
];
int32 page_size = 2 [(google.api.field_behavior) = OPTIONAL];
string page_token = 3 [(google.api.field_behavior) = OPTIONAL];
string prefix = 4 [(google.api.field_behavior) = OPTIONAL];
optional google.protobuf.FieldMask read_mask = 5;
bool return_partial_success = 9 [(google.api.field_behavior) = OPTIONAL];
}
message ListBucketsResponse {
repeated Bucket buckets = 1;
string next_page_token = 2;
repeated string unreachable = 3;
}
message LockBucketRetentionPolicyRequest {
string bucket = 1 [
(google.api.field_behavior) = REQUIRED,
(google.api.resource_reference) = { type: "storage.googleapis.com/Bucket" }
];
int64 if_metageneration_match = 2 [(google.api.field_behavior) = REQUIRED];
}
message UpdateBucketRequest {
Bucket bucket = 1 [(google.api.field_behavior) = REQUIRED];
optional int64 if_metageneration_match = 2;
optional int64 if_metageneration_not_match = 3;
string predefined_acl = 8 [(google.api.field_behavior) = OPTIONAL];
string predefined_default_object_acl = 9
[(google.api.field_behavior) = OPTIONAL];
google.protobuf.FieldMask update_mask = 6
[(google.api.field_behavior) = REQUIRED];
}
message ComposeObjectRequest {
message SourceObject {
message ObjectPreconditions {
optional int64 if_generation_match = 1;
}
string name = 1 [(google.api.field_behavior) = REQUIRED];
int64 generation = 2 [(google.api.field_behavior) = OPTIONAL];
ObjectPreconditions object_preconditions = 3
[(google.api.field_behavior) = OPTIONAL];
}
Object destination = 1 [(google.api.field_behavior) = REQUIRED];
repeated SourceObject source_objects = 2
[(google.api.field_behavior) = OPTIONAL];
string destination_predefined_acl = 9
[(google.api.field_behavior) = OPTIONAL];
optional int64 if_generation_match = 4;
optional int64 if_metageneration_match = 5;
string kms_key = 6 [
(google.api.field_behavior) = OPTIONAL,
(google.api.resource_reference) = {
type: "cloudkms.googleapis.com/CryptoKey"
}
];
CommonObjectRequestParams common_object_request_params = 7
[(google.api.field_behavior) = OPTIONAL];
ObjectChecksums object_checksums = 10
[(google.api.field_behavior) = OPTIONAL];
optional bool delete_source_objects = 11;
}
message DeleteObjectRequest {
string bucket = 1 [
(google.api.field_behavior) = REQUIRED,
(google.api.resource_reference) = { type: "storage.googleapis.com/Bucket" }
];
string object = 2 [(google.api.field_behavior) = REQUIRED];
int64 generation = 4 [(google.api.field_behavior) = OPTIONAL];
optional int64 if_generation_match = 5;
optional int64 if_generation_not_match = 6;
optional int64 if_metageneration_match = 7;
optional int64 if_metageneration_not_match = 8;
CommonObjectRequestParams common_object_request_params = 10
[(google.api.field_behavior) = OPTIONAL];
}
message RestoreObjectRequest {
string bucket = 1 [
(google.api.field_behavior) = REQUIRED,
(google.api.resource_reference) = { type: "storage.googleapis.com/Bucket" }
];
string object = 2 [(google.api.field_behavior) = REQUIRED];
int64 generation = 3 [(google.api.field_behavior) = REQUIRED];
string restore_token = 11 [(google.api.field_behavior) = OPTIONAL];
optional int64 if_generation_match = 4;
optional int64 if_generation_not_match = 5;
optional int64 if_metageneration_match = 6;
optional int64 if_metageneration_not_match = 7;
optional bool copy_source_acl = 9;
CommonObjectRequestParams common_object_request_params = 8
[(google.api.field_behavior) = OPTIONAL];
}
message CancelResumableWriteRequest {
string upload_id = 1 [(google.api.field_behavior) = REQUIRED];
}
message CancelResumableWriteResponse {}
message ReadObjectRequest {
string bucket = 1 [
(google.api.field_behavior) = REQUIRED,
(google.api.resource_reference) = { type: "storage.googleapis.com/Bucket" }
];
string object = 2 [(google.api.field_behavior) = REQUIRED];
int64 generation = 3 [(google.api.field_behavior) = OPTIONAL];
int64 read_offset = 4 [(google.api.field_behavior) = OPTIONAL];
int64 read_limit = 5 [(google.api.field_behavior) = OPTIONAL];
optional int64 if_generation_match = 6;
optional int64 if_generation_not_match = 7;
optional int64 if_metageneration_match = 8;
optional int64 if_metageneration_not_match = 9;
CommonObjectRequestParams common_object_request_params = 10
[(google.api.field_behavior) = OPTIONAL];
optional google.protobuf.FieldMask read_mask = 12;
}
message GetObjectRequest {
string bucket = 1 [
(google.api.field_behavior) = REQUIRED,
(google.api.resource_reference) = { type: "storage.googleapis.com/Bucket" }
];
string object = 2 [(google.api.field_behavior) = REQUIRED];
int64 generation = 3 [(google.api.field_behavior) = OPTIONAL];
optional bool soft_deleted = 11;
optional int64 if_generation_match = 4;
optional int64 if_generation_not_match = 5;
optional int64 if_metageneration_match = 6;
optional int64 if_metageneration_not_match = 7;
CommonObjectRequestParams common_object_request_params = 8
[(google.api.field_behavior) = OPTIONAL];
optional google.protobuf.FieldMask read_mask = 10;
string restore_token = 12 [(google.api.field_behavior) = OPTIONAL];
}
message ReadObjectResponse {
ChecksummedData checksummed_data = 1;
ObjectChecksums object_checksums = 2;
ContentRange content_range = 3;
Object metadata = 4;
}
message BidiReadObjectSpec {
string bucket = 1 [
(google.api.field_behavior) = REQUIRED,
(google.api.resource_reference) = { type: "storage.googleapis.com/Bucket" }
];
string object = 2 [(google.api.field_behavior) = REQUIRED];
int64 generation = 3 [(google.api.field_behavior) = OPTIONAL];
optional int64 if_generation_match = 4;
optional int64 if_generation_not_match = 5;
optional int64 if_metageneration_match = 6;
optional int64 if_metageneration_not_match = 7;
CommonObjectRequestParams common_object_request_params = 8
[(google.api.field_behavior) = OPTIONAL];
optional google.protobuf.FieldMask read_mask = 12 [deprecated = true];
optional BidiReadHandle read_handle = 13;
optional string routing_token = 14;
}
message BidiReadObjectRequest {
BidiReadObjectSpec read_object_spec = 1
[(google.api.field_behavior) = OPTIONAL];
repeated ReadRange read_ranges = 8 [(google.api.field_behavior) = OPTIONAL];
}
message BidiReadObjectResponse {
repeated ObjectRangeData object_data_ranges = 6;
Object metadata = 4;
BidiReadHandle read_handle = 7;
}
message BidiReadObjectRedirectedError {
BidiReadHandle read_handle = 1;
optional string routing_token = 2;
}
message BidiWriteObjectRedirectedError {
optional string routing_token = 1;
optional BidiWriteHandle write_handle = 2;
optional int64 generation = 3;
}
message BidiReadObjectError {
repeated ReadRangeError read_range_errors = 1;
}
message ReadRangeError {
int64 read_id = 1;
google.rpc.Status status = 2;
}
message ReadRange {
int64 read_offset = 1 [(google.api.field_behavior) = REQUIRED];
int64 read_length = 2 [(google.api.field_behavior) = OPTIONAL];
int64 read_id = 3 [(google.api.field_behavior) = REQUIRED];
}
message ObjectRangeData {
ChecksummedData checksummed_data = 1;
ReadRange read_range = 2;
bool range_end = 3;
}
message BidiReadHandle {
bytes handle = 1 [(google.api.field_behavior) = REQUIRED];
}
message BidiWriteHandle {
bytes handle = 1 [(google.api.field_behavior) = REQUIRED];
}
message WriteObjectSpec {
Object resource = 1 [(google.api.field_behavior) = REQUIRED];
string predefined_acl = 7 [(google.api.field_behavior) = OPTIONAL];
optional int64 if_generation_match = 3;
optional int64 if_generation_not_match = 4;
optional int64 if_metageneration_match = 5;
optional int64 if_metageneration_not_match = 6;
optional int64 object_size = 8;
optional bool appendable = 9;
}
message WriteObjectRequest {
oneof first_message {
string upload_id = 1;
WriteObjectSpec write_object_spec = 2;
}
int64 write_offset = 3 [(google.api.field_behavior) = REQUIRED];
oneof data {
ChecksummedData checksummed_data = 4;
}
ObjectChecksums object_checksums = 6 [(google.api.field_behavior) = OPTIONAL];
bool finish_write = 7 [(google.api.field_behavior) = OPTIONAL];
CommonObjectRequestParams common_object_request_params = 8
[(google.api.field_behavior) = OPTIONAL];
}
message WriteObjectResponse {
oneof write_status {
int64 persisted_size = 1;
Object resource = 2;
}
}
message AppendObjectSpec {
string bucket = 1 [
(google.api.field_behavior) = REQUIRED,
(google.api.resource_reference) = { type: "storage.googleapis.com/Bucket" }
];
string object = 2 [(google.api.field_behavior) = REQUIRED];
int64 generation = 3 [(google.api.field_behavior) = REQUIRED];
optional int64 if_metageneration_match = 4;
optional int64 if_metageneration_not_match = 5;
optional string routing_token = 6;
optional BidiWriteHandle write_handle = 7;
}
message BidiWriteObjectRequest {
oneof first_message {
string upload_id = 1;
WriteObjectSpec write_object_spec = 2;
AppendObjectSpec append_object_spec = 11;
}
int64 write_offset = 3 [(google.api.field_behavior) = REQUIRED];
oneof data {
ChecksummedData checksummed_data = 4;
}
ObjectChecksums object_checksums = 6 [(google.api.field_behavior) = OPTIONAL];
bool state_lookup = 7 [(google.api.field_behavior) = OPTIONAL];
bool flush = 8 [(google.api.field_behavior) = OPTIONAL];
bool finish_write = 9 [(google.api.field_behavior) = OPTIONAL];
CommonObjectRequestParams common_object_request_params = 10
[(google.api.field_behavior) = OPTIONAL];
}
message BidiWriteObjectResponse {
oneof write_status {
int64 persisted_size = 1;
Object resource = 2;
}
optional BidiWriteHandle write_handle = 3;
}
message ListObjectsRequest {
string parent = 1 [
(google.api.field_behavior) = REQUIRED,
(google.api.resource_reference) = { type: "storage.googleapis.com/Bucket" }
];
int32 page_size = 2 [(google.api.field_behavior) = OPTIONAL];
string page_token = 3 [(google.api.field_behavior) = OPTIONAL];
string delimiter = 4 [(google.api.field_behavior) = OPTIONAL];
bool include_trailing_delimiter = 5 [(google.api.field_behavior) = OPTIONAL];
string prefix = 6 [(google.api.field_behavior) = OPTIONAL];
bool versions = 7 [(google.api.field_behavior) = OPTIONAL];
optional google.protobuf.FieldMask read_mask = 8;
string lexicographic_start = 10 [(google.api.field_behavior) = OPTIONAL];
string lexicographic_end = 11 [(google.api.field_behavior) = OPTIONAL];
bool soft_deleted = 12 [(google.api.field_behavior) = OPTIONAL];
bool include_folders_as_prefixes = 13
[(google.api.field_behavior) = OPTIONAL];
string match_glob = 14 [(google.api.field_behavior) = OPTIONAL];
string filter = 15 [(google.api.field_behavior) = OPTIONAL];
}
message QueryWriteStatusRequest {
string upload_id = 1 [(google.api.field_behavior) = REQUIRED];
CommonObjectRequestParams common_object_request_params = 2
[(google.api.field_behavior) = OPTIONAL];
}
message QueryWriteStatusResponse {
oneof write_status {
int64 persisted_size = 1;
Object resource = 2;
}
}
message RewriteObjectRequest {
string destination_name = 24 [
(google.api.field_behavior) = REQUIRED,
(google.api.field_behavior) = IMMUTABLE
];
string destination_bucket = 25 [
(google.api.field_behavior) = REQUIRED,
(google.api.field_behavior) = IMMUTABLE,
(google.api.resource_reference) = { type: "storage.googleapis.com/Bucket" }
];
string destination_kms_key = 27 [
(google.api.field_behavior) = OPTIONAL,
(google.api.resource_reference) = {
type: "cloudkms.googleapis.com/CryptoKey"
}
];
Object destination = 1 [(google.api.field_behavior) = OPTIONAL];
string source_bucket = 2 [
(google.api.field_behavior) = REQUIRED,
(google.api.resource_reference) = { type: "storage.googleapis.com/Bucket" }
];
string source_object = 3 [(google.api.field_behavior) = REQUIRED];
int64 source_generation = 4 [(google.api.field_behavior) = OPTIONAL];
string rewrite_token = 5 [(google.api.field_behavior) = OPTIONAL];
string destination_predefined_acl = 28
[(google.api.field_behavior) = OPTIONAL];
optional int64 if_generation_match = 7;
optional int64 if_generation_not_match = 8;
optional int64 if_metageneration_match = 9;
optional int64 if_metageneration_not_match = 10;
optional int64 if_source_generation_match = 11;
optional int64 if_source_generation_not_match = 12;
optional int64 if_source_metageneration_match = 13;
optional int64 if_source_metageneration_not_match = 14;
int64 max_bytes_rewritten_per_call = 15
[(google.api.field_behavior) = OPTIONAL];
string copy_source_encryption_algorithm = 16
[(google.api.field_behavior) = OPTIONAL];
bytes copy_source_encryption_key_bytes = 21
[(google.api.field_behavior) = OPTIONAL];
bytes copy_source_encryption_key_sha256_bytes = 22
[(google.api.field_behavior) = OPTIONAL];
CommonObjectRequestParams common_object_request_params = 19
[(google.api.field_behavior) = OPTIONAL];
ObjectChecksums object_checksums = 29
[(google.api.field_behavior) = OPTIONAL];
}
message RewriteResponse {
int64 total_bytes_rewritten = 1;
int64 object_size = 2;
bool done = 3;
string rewrite_token = 4;
Object resource = 5;
}
message MoveObjectRequest {
string bucket = 1 [
(google.api.field_behavior) = REQUIRED,
(google.api.resource_reference) = { type: "storage.googleapis.com/Bucket" }
];
string source_object = 2 [(google.api.field_behavior) = REQUIRED];
string destination_object = 3 [(google.api.field_behavior) = REQUIRED];
optional int64 if_source_generation_match = 4
[(google.api.field_behavior) = OPTIONAL];
optional int64 if_source_generation_not_match = 5
[(google.api.field_behavior) = OPTIONAL];
optional int64 if_source_metageneration_match = 6
[(google.api.field_behavior) = OPTIONAL];
optional int64 if_source_metageneration_not_match = 7
[(google.api.field_behavior) = OPTIONAL];
optional int64 if_generation_match = 8
[(google.api.field_behavior) = OPTIONAL];
optional int64 if_generation_not_match = 9
[(google.api.field_behavior) = OPTIONAL];
optional int64 if_metageneration_match = 10
[(google.api.field_behavior) = OPTIONAL];
optional int64 if_metageneration_not_match = 11
[(google.api.field_behavior) = OPTIONAL];
}
message StartResumableWriteRequest {
WriteObjectSpec write_object_spec = 1
[(google.api.field_behavior) = REQUIRED];
CommonObjectRequestParams common_object_request_params = 3
[(google.api.field_behavior) = OPTIONAL];
ObjectChecksums object_checksums = 5 [(google.api.field_behavior) = OPTIONAL];
}
message StartResumableWriteResponse {
string upload_id = 1;
}
message UpdateObjectRequest {
Object object = 1 [(google.api.field_behavior) = REQUIRED];
optional int64 if_generation_match = 2;
optional int64 if_generation_not_match = 3;
optional int64 if_metageneration_match = 4;
optional int64 if_metageneration_not_match = 5;
string predefined_acl = 10 [(google.api.field_behavior) = OPTIONAL];
google.protobuf.FieldMask update_mask = 7
[(google.api.field_behavior) = REQUIRED];
CommonObjectRequestParams common_object_request_params = 8
[(google.api.field_behavior) = OPTIONAL];
bool override_unlocked_retention = 11
[(google.api.field_behavior) = OPTIONAL];
}
message CommonObjectRequestParams {
string encryption_algorithm = 1 [(google.api.field_behavior) = OPTIONAL];
bytes encryption_key_bytes = 4 [(google.api.field_behavior) = OPTIONAL];
bytes encryption_key_sha256_bytes = 5
[(google.api.field_behavior) = OPTIONAL];
}
message ServiceConstants {
enum Values {
option allow_alias = true;
VALUES_UNSPECIFIED = 0;
MAX_READ_CHUNK_BYTES = 2097152;
MAX_WRITE_CHUNK_BYTES = 2097152;
MAX_OBJECT_SIZE_MB = 5242880;
MAX_CUSTOM_METADATA_FIELD_NAME_BYTES = 1024;
MAX_CUSTOM_METADATA_FIELD_VALUE_BYTES = 4096;
MAX_CUSTOM_METADATA_TOTAL_SIZE_BYTES = 8192;
MAX_BUCKET_METADATA_TOTAL_SIZE_BYTES = 20480;
MAX_NOTIFICATION_CONFIGS_PER_BUCKET = 100;
MAX_LIFECYCLE_RULES_PER_BUCKET = 100;
MAX_NOTIFICATION_CUSTOM_ATTRIBUTES = 5;
MAX_NOTIFICATION_CUSTOM_ATTRIBUTE_KEY_LENGTH = 256;
MAX_NOTIFICATION_CUSTOM_ATTRIBUTE_VALUE_LENGTH = 1024;
MAX_LABELS_ENTRIES_COUNT = 64;
MAX_LABELS_KEY_VALUE_LENGTH = 63;
MAX_LABELS_KEY_VALUE_BYTES = 128;
MAX_OBJECT_IDS_PER_DELETE_OBJECTS_REQUEST = 1000;
SPLIT_TOKEN_MAX_VALID_DAYS = 14;
}
}
message Bucket {
option (google.api.resource) = {
type: "storage.googleapis.com/Bucket"
pattern: "projects/{project}/buckets/{bucket}"
plural: "buckets"
singular: "bucket"
};
message Billing {
bool requester_pays = 1 [(google.api.field_behavior) = OPTIONAL];
}
message Cors {
repeated string origin = 1 [(google.api.field_behavior) = OPTIONAL];
repeated string method = 2 [(google.api.field_behavior) = OPTIONAL];
repeated string response_header = 3
[(google.api.field_behavior) = OPTIONAL];
int32 max_age_seconds = 4 [(google.api.field_behavior) = OPTIONAL];
}
message Encryption {
message GoogleManagedEncryptionEnforcementConfig {
optional string restriction_mode = 3;
optional google.protobuf.Timestamp effective_time = 2;
}
message CustomerManagedEncryptionEnforcementConfig {
optional string restriction_mode = 3;
optional google.protobuf.Timestamp effective_time = 2;
}
message CustomerSuppliedEncryptionEnforcementConfig {
optional string restriction_mode = 3;
optional google.protobuf.Timestamp effective_time = 2;
}
string default_kms_key = 1 [
(google.api.field_behavior) = OPTIONAL,
(google.api.resource_reference) = {
type: "cloudkms.googleapis.com/CryptoKey"
}
];
optional GoogleManagedEncryptionEnforcementConfig
google_managed_encryption_enforcement_config = 2
[(google.api.field_behavior) = OPTIONAL];
optional CustomerManagedEncryptionEnforcementConfig
customer_managed_encryption_enforcement_config = 3
[(google.api.field_behavior) = OPTIONAL];
optional CustomerSuppliedEncryptionEnforcementConfig
customer_supplied_encryption_enforcement_config = 4
[(google.api.field_behavior) = OPTIONAL];
}
message IamConfig {
message UniformBucketLevelAccess {
bool enabled = 1 [(google.api.field_behavior) = OPTIONAL];
google.protobuf.Timestamp lock_time = 2
[(google.api.field_behavior) = OPTIONAL];
}
UniformBucketLevelAccess uniform_bucket_level_access = 1
[(google.api.field_behavior) = OPTIONAL];
string public_access_prevention = 3
[(google.api.field_behavior) = OPTIONAL];
}
message Lifecycle {
message Rule {
message Action {
string type = 1 [(google.api.field_behavior) = OPTIONAL];
string storage_class = 2 [(google.api.field_behavior) = OPTIONAL];
}
message Condition {
optional int32 age_days = 1;
google.type.Date created_before = 2
[(google.api.field_behavior) = OPTIONAL];
optional bool is_live = 3;
optional int32 num_newer_versions = 4;
repeated string matches_storage_class = 5
[(google.api.field_behavior) = OPTIONAL];
optional int32 days_since_custom_time = 7;
google.type.Date custom_time_before = 8
[(google.api.field_behavior) = OPTIONAL];
optional int32 days_since_noncurrent_time = 9;
google.type.Date noncurrent_time_before = 10
[(google.api.field_behavior) = OPTIONAL];
repeated string matches_prefix = 11
[(google.api.field_behavior) = OPTIONAL];
repeated string matches_suffix = 12
[(google.api.field_behavior) = OPTIONAL];
}
Action action = 1 [(google.api.field_behavior) = OPTIONAL];
Condition condition = 2 [(google.api.field_behavior) = OPTIONAL];
}
repeated Rule rule = 1 [(google.api.field_behavior) = OPTIONAL];
}
message Logging {
string log_bucket = 1 [(google.api.field_behavior) = OPTIONAL];
string log_object_prefix = 2 [(google.api.field_behavior) = OPTIONAL];
}
message ObjectRetention {
bool enabled = 1 [
(google.api.field_behavior) = OPTIONAL,
(google.api.field_behavior) = OUTPUT_ONLY
];
}
message RetentionPolicy {
google.protobuf.Timestamp effective_time = 1
[(google.api.field_behavior) = OPTIONAL];
bool is_locked = 2 [(google.api.field_behavior) = OPTIONAL];
google.protobuf.Duration retention_duration = 4
[(google.api.field_behavior) = OPTIONAL];
}
message SoftDeletePolicy {
optional google.protobuf.Duration retention_duration = 1;
optional google.protobuf.Timestamp effective_time = 2;
}
message Versioning {
bool enabled = 1 [(google.api.field_behavior) = OPTIONAL];
}
message Website {
string main_page_suffix = 1 [(google.api.field_behavior) = OPTIONAL];
string not_found_page = 2 [(google.api.field_behavior) = OPTIONAL];
}
message CustomPlacementConfig {
repeated string data_locations = 1 [(google.api.field_behavior) = OPTIONAL];
}
message Autoclass {
bool enabled = 1 [(google.api.field_behavior) = OPTIONAL];
google.protobuf.Timestamp toggle_time = 2
[(google.api.field_behavior) = OUTPUT_ONLY];
optional string terminal_storage_class = 3;
optional google.protobuf.Timestamp terminal_storage_class_update_time = 4
[(google.api.field_behavior) = OUTPUT_ONLY];
}
message IpFilter {
message PublicNetworkSource {
repeated string allowed_ip_cidr_ranges = 1
[(google.api.field_behavior) = OPTIONAL];
}
message VpcNetworkSource {
optional string network = 1;
repeated string allowed_ip_cidr_ranges = 2
[(google.api.field_behavior) = OPTIONAL];
}
optional string mode = 1;
optional PublicNetworkSource public_network_source = 2;
repeated VpcNetworkSource vpc_network_sources = 3
[(google.api.field_behavior) = OPTIONAL];
bool allow_cross_org_vpcs = 4 [(google.api.field_behavior) = OPTIONAL];
optional bool allow_all_service_agent_access = 5;
}
message HierarchicalNamespace {
bool enabled = 1 [(google.api.field_behavior) = OPTIONAL];
}
string name = 1 [(google.api.field_behavior) = IDENTIFIER];
string bucket_id = 2 [(google.api.field_behavior) = OUTPUT_ONLY];
string etag = 29;
string project = 3 [
(google.api.field_behavior) = IMMUTABLE,
(google.api.resource_reference) = {
type: "cloudresourcemanager.googleapis.com/Project"
}
];
int64 metageneration = 4 [(google.api.field_behavior) = OUTPUT_ONLY];
string location = 5 [(google.api.field_behavior) = IMMUTABLE];
string location_type = 6 [(google.api.field_behavior) = OUTPUT_ONLY];
string storage_class = 7 [(google.api.field_behavior) = OPTIONAL];
string rpo = 27 [(google.api.field_behavior) = OPTIONAL];
repeated BucketAccessControl acl = 8 [(google.api.field_behavior) = OPTIONAL];
repeated ObjectAccessControl default_object_acl = 9
[(google.api.field_behavior) = OPTIONAL];
Lifecycle lifecycle = 10 [(google.api.field_behavior) = OPTIONAL];
google.protobuf.Timestamp create_time = 11
[(google.api.field_behavior) = OUTPUT_ONLY];
repeated Cors cors = 12 [(google.api.field_behavior) = OPTIONAL];
google.protobuf.Timestamp update_time = 13
[(google.api.field_behavior) = OUTPUT_ONLY];
bool default_event_based_hold = 14 [(google.api.field_behavior) = OPTIONAL];
map<string, string> labels = 15 [(google.api.field_behavior) = OPTIONAL];
Website website = 16 [(google.api.field_behavior) = OPTIONAL];
Versioning versioning = 17 [(google.api.field_behavior) = OPTIONAL];
Logging logging = 18 [(google.api.field_behavior) = OPTIONAL];
Owner owner = 19 [(google.api.field_behavior) = OUTPUT_ONLY];
Encryption encryption = 20 [(google.api.field_behavior) = OPTIONAL];
Billing billing = 21 [(google.api.field_behavior) = OPTIONAL];
RetentionPolicy retention_policy = 22
[(google.api.field_behavior) = OPTIONAL];
IamConfig iam_config = 23 [(google.api.field_behavior) = OPTIONAL];
bool satisfies_pzs = 25 [(google.api.field_behavior) = OPTIONAL];
CustomPlacementConfig custom_placement_config = 26
[(google.api.field_behavior) = OPTIONAL];
Autoclass autoclass = 28 [(google.api.field_behavior) = OPTIONAL];
HierarchicalNamespace hierarchical_namespace = 32
[(google.api.field_behavior) = OPTIONAL];
SoftDeletePolicy soft_delete_policy = 31
[(google.api.field_behavior) = OPTIONAL];
ObjectRetention object_retention = 33
[(google.api.field_behavior) = OPTIONAL];
optional IpFilter ip_filter = 38 [(google.api.field_behavior) = OPTIONAL];
}
message BucketAccessControl {
string role = 1 [(google.api.field_behavior) = OPTIONAL];
string id = 2 [(google.api.field_behavior) = OPTIONAL];
string entity = 3 [(google.api.field_behavior) = OPTIONAL];
string entity_alt = 9 [(google.api.field_behavior) = OUTPUT_ONLY];
string entity_id = 4 [(google.api.field_behavior) = OPTIONAL];
string etag = 8 [(google.api.field_behavior) = OPTIONAL];
string email = 5 [(google.api.field_behavior) = OPTIONAL];
string domain = 6 [(google.api.field_behavior) = OPTIONAL];
ProjectTeam project_team = 7 [(google.api.field_behavior) = OPTIONAL];
}
message ChecksummedData {
bytes content = 1 [ctype = CORD, (google.api.field_behavior) = OPTIONAL];
optional fixed32 crc32c = 2;
}
message ObjectChecksums {
optional fixed32 crc32c = 1;
bytes md5_hash = 2 [(google.api.field_behavior) = OPTIONAL];
}
message ObjectCustomContextPayload {
string value = 1 [(google.api.field_behavior) = REQUIRED];
google.protobuf.Timestamp create_time = 2
[(google.api.field_behavior) = OUTPUT_ONLY];
google.protobuf.Timestamp update_time = 3
[(google.api.field_behavior) = OUTPUT_ONLY];
}
message ObjectContexts {
map<string, ObjectCustomContextPayload> custom = 1
[(google.api.field_behavior) = OPTIONAL];
}
message CustomerEncryption {
string encryption_algorithm = 1 [(google.api.field_behavior) = OPTIONAL];
bytes key_sha256_bytes = 3 [(google.api.field_behavior) = OPTIONAL];
}
message Object {
message Retention {
enum Mode {
MODE_UNSPECIFIED = 0;
UNLOCKED = 1;
LOCKED = 2;
}
Mode mode = 1 [(google.api.field_behavior) = OPTIONAL];
google.protobuf.Timestamp retain_until_time = 2
[(google.api.field_behavior) = OPTIONAL];
}
string name = 1 [(google.api.field_behavior) = IMMUTABLE];
string bucket = 2 [
(google.api.field_behavior) = IMMUTABLE,
(google.api.resource_reference) = { type: "storage.googleapis.com/Bucket" }
];
string etag = 27 [(google.api.field_behavior) = OPTIONAL];
int64 generation = 3 [(google.api.field_behavior) = IMMUTABLE];
optional string restore_token = 35
[(google.api.field_behavior) = OUTPUT_ONLY];
int64 metageneration = 4 [(google.api.field_behavior) = OUTPUT_ONLY];
string storage_class = 5 [(google.api.field_behavior) = OPTIONAL];
int64 size = 6 [(google.api.field_behavior) = OUTPUT_ONLY];
string content_encoding = 7 [(google.api.field_behavior) = OPTIONAL];
string content_disposition = 8 [(google.api.field_behavior) = OPTIONAL];
string cache_control = 9 [(google.api.field_behavior) = OPTIONAL];
repeated ObjectAccessControl acl = 10
[(google.api.field_behavior) = OPTIONAL];
string content_language = 11 [(google.api.field_behavior) = OPTIONAL];
google.protobuf.Timestamp delete_time = 12
[(google.api.field_behavior) = OUTPUT_ONLY];
google.protobuf.Timestamp finalize_time = 36
[(google.api.field_behavior) = OUTPUT_ONLY];
string content_type = 13 [(google.api.field_behavior) = OPTIONAL];
google.protobuf.Timestamp create_time = 14
[(google.api.field_behavior) = OUTPUT_ONLY];
int32 component_count = 15 [(google.api.field_behavior) = OUTPUT_ONLY];
ObjectChecksums checksums = 16 [(google.api.field_behavior) = OUTPUT_ONLY];
google.protobuf.Timestamp update_time = 17
[(google.api.field_behavior) = OUTPUT_ONLY];
string kms_key = 18 [
(google.api.field_behavior) = OPTIONAL,
(google.api.resource_reference) = {
type: "cloudkms.googleapis.com/CryptoKey"
}
];
google.protobuf.Timestamp update_storage_class_time = 19
[(google.api.field_behavior) = OUTPUT_ONLY];
bool temporary_hold = 20 [(google.api.field_behavior) = OPTIONAL];
google.protobuf.Timestamp retention_expire_time = 21
[(google.api.field_behavior) = OPTIONAL];
map<string, string> metadata = 22 [(google.api.field_behavior) = OPTIONAL];
ObjectContexts contexts = 38 [(google.api.field_behavior) = OPTIONAL];
optional bool event_based_hold = 23;
Owner owner = 24 [(google.api.field_behavior) = OUTPUT_ONLY];
CustomerEncryption customer_encryption = 25
[(google.api.field_behavior) = OPTIONAL];
google.protobuf.Timestamp custom_time = 26
[(google.api.field_behavior) = OPTIONAL];
optional google.protobuf.Timestamp soft_delete_time = 28
[(google.api.field_behavior) = OUTPUT_ONLY];
optional google.protobuf.Timestamp hard_delete_time = 29
[(google.api.field_behavior) = OUTPUT_ONLY];
Retention retention = 30 [(google.api.field_behavior) = OPTIONAL];
}
message ObjectAccessControl {
string role = 1 [(google.api.field_behavior) = OPTIONAL];
string id = 2 [(google.api.field_behavior) = OPTIONAL];
string entity = 3 [(google.api.field_behavior) = OPTIONAL];
string entity_alt = 9 [(google.api.field_behavior) = OUTPUT_ONLY];
string entity_id = 4 [(google.api.field_behavior) = OPTIONAL];
string etag = 8 [(google.api.field_behavior) = OPTIONAL];
string email = 5 [(google.api.field_behavior) = OPTIONAL];
string domain = 6 [(google.api.field_behavior) = OPTIONAL];
ProjectTeam project_team = 7 [(google.api.field_behavior) = OPTIONAL];
}
message ListObjectsResponse {
repeated Object objects = 1;
repeated string prefixes = 2;
string next_page_token = 3;
}
message ProjectTeam {
string project_number = 1 [(google.api.field_behavior) = OPTIONAL];
string team = 2 [(google.api.field_behavior) = OPTIONAL];
}
message Owner {
string entity = 1 [(google.api.field_behavior) = OPTIONAL];
string entity_id = 2 [(google.api.field_behavior) = OPTIONAL];
}
message ContentRange {
int64 start = 1;
int64 end = 2;
int64 complete_length = 3;
}
